"use strict";(globalThis.webpackChunkai_robotics_book=globalThis.webpackChunkai_robotics_book||[]).push([[42],{3650:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"module-1-ros2/architecture","title":"ROS 2 Architecture","description":"Understanding the foundational architecture and design principles of ROS 2 for humanoid robotics","source":"@site/docs/module-1-ros2/01-architecture.md","sourceDirName":"module-1-ros2","slug":"/module-1-ros2/architecture","permalink":"/ai-robotics-book/docs/module-1-ros2/architecture","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"ROS 2 Architecture","description":"Understanding the foundational architecture and design principles of ROS 2 for humanoid robotics"},"sidebar":"tutorialSidebar","previous":{"title":"Module 1: ROS 2 Fundamentals","permalink":"/ai-robotics-book/docs/category/module-1-ros-2-fundamentals"},"next":{"title":"Nodes, Topics, and Services","permalink":"/ai-robotics-book/docs/module-1-ros2/nodes-topics-services"}}');var r=i(4848),t=i(8453);const o={sidebar_position:1,title:"ROS 2 Architecture",description:"Understanding the foundational architecture and design principles of ROS 2 for humanoid robotics"},a="ROS 2 Architecture",c={},l=[{value:"Learning Outcomes",id:"learning-outcomes",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Introduction to ROS 2",id:"introduction-to-ros-2",level:2},{value:"Why ROS 2?",id:"why-ros-2",level:3},{value:"Core Concepts",id:"core-concepts",level:2},{value:"The Computation Graph",id:"the-computation-graph",level:3},{value:"Data Distribution Service (DDS)",id:"data-distribution-service-dds",level:3},{value:"Workspaces and Packages",id:"workspaces-and-packages",level:3},{value:"Setting Up Your Environment",id:"setting-up-your-environment",level:2},{value:"Installation",id:"installation",level:3},{value:"Creating a Workspace",id:"creating-a-workspace",level:3},{value:"Creating Your First Package",id:"creating-your-first-package",level:3},{value:"The ROS 2 Graph in Action",id:"the-ros-2-graph-in-action",level:2},{value:"Exercises",id:"exercises",level:2},{value:"Exercise 1: Explore the ROS 2 Graph",id:"exercise-1-explore-the-ros-2-graph",level:3},{value:"Exercise 2: Create a Package",id:"exercise-2-create-a-package",level:3},{value:"Exercise 3: Inspect QoS Settings",id:"exercise-3-inspect-qos-settings",level:3},{value:"Assessment Questions",id:"assessment-questions",level:2},{value:"Summary",id:"summary",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"ros-2-architecture",children:"ROS 2 Architecture"})}),"\n",(0,r.jsx)(n.h2,{id:"learning-outcomes",children:"Learning Outcomes"}),"\n",(0,r.jsx)(n.p,{children:"By the end of this chapter, you will be able to:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Explain"})," the fundamental architecture of ROS 2 and its key differences from ROS 1"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Describe"})," the role of DDS (Data Distribution Service) in ROS 2 communication"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Identify"})," the core components of a ROS 2 system and their interactions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Configure"})," a basic ROS 2 workspace for development"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Python 3.10+ installed"}),"\n",(0,r.jsx)(n.li,{children:"Basic understanding of distributed systems concepts"}),"\n",(0,r.jsx)(n.li,{children:"Familiarity with Linux command line"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"introduction-to-ros-2",children:"Introduction to ROS 2"}),"\n",(0,r.jsx)(n.p,{children:"The Robot Operating System 2 (ROS 2) is not an operating system in the traditional sense, but rather a flexible framework for writing robot software. It provides a collection of tools, libraries, and conventions that aim to simplify the task of creating complex and robust robot behavior across a wide variety of robotic platforms."}),"\n",(0,r.jsx)(n.mermaid,{value:'graph TB\n    subgraph "ROS 2 Architecture"\n        A[Application Layer] --\x3e B[ROS 2 Client Libraries]\n        B --\x3e C[RCL - ROS Client Library]\n        C --\x3e D[RMW - ROS Middleware Interface]\n        D --\x3e E[DDS Implementation]\n        E --\x3e F[Network Layer]\n    end\n\n    style A fill:#e3f2fd\n    style B fill:#e8f5e9\n    style C fill:#fff3e0\n    style D fill:#fce4ec\n    style E fill:#f3e5f5\n    style F fill:#e0e0e0'}),"\n",(0,r.jsx)(n.h3,{id:"why-ros-2",children:"Why ROS 2?"}),"\n",(0,r.jsx)(n.p,{children:"ROS 2 was developed to address limitations in the original ROS (now called ROS 1):"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Feature"}),(0,r.jsx)(n.th,{children:"ROS 1"}),(0,r.jsx)(n.th,{children:"ROS 2"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Real-time support"}),(0,r.jsx)(n.td,{children:"Limited"}),(0,r.jsx)(n.td,{children:"Built-in via DDS"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Security"}),(0,r.jsx)(n.td,{children:"None"}),(0,r.jsx)(n.td,{children:"DDS Security"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Multi-robot"}),(0,r.jsx)(n.td,{children:"Complex"}),(0,r.jsx)(n.td,{children:"Native support"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Embedded systems"}),(0,r.jsx)(n.td,{children:"Limited"}),(0,r.jsx)(n.td,{children:"First-class support"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Windows/macOS"}),(0,r.jsx)(n.td,{children:"Community ports"}),(0,r.jsx)(n.td,{children:"Official support"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Lifecycle management"}),(0,r.jsx)(n.td,{children:"None"}),(0,r.jsx)(n.td,{children:"Managed nodes"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"core-concepts",children:"Core Concepts"}),"\n",(0,r.jsx)(n.h3,{id:"the-computation-graph",children:"The Computation Graph"}),"\n",(0,r.jsxs)(n.p,{children:["ROS 2 organizes robotic software as a ",(0,r.jsx)(n.strong,{children:"computation graph"}),"\u2014a peer-to-peer network of processes that communicate via topics, services, and actions."]}),"\n",(0,r.jsx)(n.mermaid,{value:'graph LR\n    subgraph "ROS 2 Computation Graph"\n        N1[Camera Node] --\x3e|/camera/image| N2[Perception Node]\n        N2 --\x3e|/detected_objects| N3[Planning Node]\n        N3 --\x3e|/cmd_vel| N4[Control Node]\n        N4 --\x3e|/joint_commands| N5[Hardware Interface]\n    end\n\n    style N1 fill:#bbdefb\n    style N2 fill:#c8e6c9\n    style N3 fill:#ffe0b2\n    style N4 fill:#f8bbd0\n    style N5 fill:#d1c4e9'}),"\n",(0,r.jsx)(n.h3,{id:"data-distribution-service-dds",children:"Data Distribution Service (DDS)"}),"\n",(0,r.jsx)(n.p,{children:"ROS 2 uses DDS as its middleware, providing:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Quality of Service (QoS)"}),": Fine-grained control over communication reliability"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Discovery"}),": Automatic node discovery without a central master"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Real-time"}),": Deterministic communication patterns"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Security"}),": Authentication, encryption, and access control"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# Example: Setting QoS profiles in rclpy\nfrom rclpy.qos import QoSProfile, ReliabilityPolicy, HistoryPolicy\n\nqos_profile = QoSProfile(\n    reliability=ReliabilityPolicy.RELIABLE,\n    history=HistoryPolicy.KEEP_LAST,\n    depth=10\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"workspaces-and-packages",children:"Workspaces and Packages"}),"\n",(0,r.jsxs)(n.p,{children:["ROS 2 organizes code into ",(0,r.jsx)(n.strong,{children:"packages"})," within ",(0,r.jsx)(n.strong,{children:"workspaces"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2_ws/                    # Workspace root\n\u251c\u2500\u2500 src/                    # Source space\n\u2502   \u251c\u2500\u2500 my_robot/          # Package 1\n\u2502   \u2502   \u251c\u2500\u2500 package.xml    # Package manifest\n\u2502   \u2502   \u251c\u2500\u2500 setup.py       # Python build config\n\u2502   \u2502   \u2514\u2500\u2500 my_robot/      # Python module\n\u2502   \u2502       \u2514\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 robot_interfaces/   # Package 2\n\u2502       \u251c\u2500\u2500 package.xml\n\u2502       \u251c\u2500\u2500 CMakeLists.txt\n\u2502       \u2514\u2500\u2500 msg/\n\u2502           \u2514\u2500\u2500 CustomMsg.msg\n\u251c\u2500\u2500 build/                  # Build artifacts\n\u251c\u2500\u2500 install/                # Install space\n\u2514\u2500\u2500 log/                    # Build logs\n"})}),"\n",(0,r.jsx)(n.h2,{id:"setting-up-your-environment",children:"Setting Up Your Environment"}),"\n",(0,r.jsx)(n.h3,{id:"installation",children:"Installation"}),"\n",(0,r.jsx)(n.p,{children:"For Ubuntu 24.04 with ROS 2 Jazzy:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Add ROS 2 repository\nsudo apt update && sudo apt install software-properties-common\nsudo add-apt-repository universe\nsudo curl -sSL https://raw.githubusercontent.com/ros/rosdistro/master/ros.key -o /usr/share/keyrings/ros-archive-keyring.gpg\necho "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] http://packages.ros.org/ros2/ubuntu $(. /etc/os-release && echo $UBUNTU_CODENAME) main" | sudo tee /etc/apt/sources.list.d/ros2.list > /dev/null\n\n# Install ROS 2 Jazzy\nsudo apt update\nsudo apt install ros-jazzy-desktop\n\n# Source the installation\nsource /opt/ros/jazzy/setup.bash\n'})}),"\n",(0,r.jsx)(n.h3,{id:"creating-a-workspace",children:"Creating a Workspace"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Create workspace directory\nmkdir -p ~/ros2_ws/src\ncd ~/ros2_ws\n\n# Build the workspace (even empty)\ncolcon build\n\n# Source the workspace\nsource install/setup.bash\n"})}),"\n",(0,r.jsx)(n.h3,{id:"creating-your-first-package",children:"Creating Your First Package"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws/src\n\n# Create a Python package\nros2 pkg create --build-type ament_python my_first_package \\\n    --dependencies rclpy std_msgs\n\n# Package structure created:\n# my_first_package/\n# \u251c\u2500\u2500 package.xml\n# \u251c\u2500\u2500 setup.py\n# \u251c\u2500\u2500 setup.cfg\n# \u251c\u2500\u2500 resource/\n# \u2502   \u2514\u2500\u2500 my_first_package\n# \u2514\u2500\u2500 my_first_package/\n#     \u2514\u2500\u2500 __init__.py\n"})}),"\n",(0,r.jsx)(n.h2,{id:"the-ros-2-graph-in-action",children:"The ROS 2 Graph in Action"}),"\n",(0,r.jsx)(n.p,{children:"Let's create a minimal node to understand the architecture:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'#!/usr/bin/env python3\n"""Minimal ROS 2 node demonstrating architecture concepts."""\n\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\n\nclass MinimalPublisher(Node):\n    """A minimal ROS 2 publisher node."""\n\n    def __init__(self):\n        super().__init__(\'minimal_publisher\')\n\n        # Create a publisher on the \'topic\' topic\n        self.publisher_ = self.create_publisher(\n            String,           # Message type\n            \'topic\',          # Topic name\n            10                # QoS history depth\n        )\n\n        # Create a timer that fires every 0.5 seconds\n        timer_period = 0.5\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n\n        self.get_logger().info(\'MinimalPublisher node started\')\n\n    def timer_callback(self):\n        """Callback function executed by the timer."""\n        msg = String()\n        msg.data = f\'Hello, ROS 2! Message #{self.i}\'\n        self.publisher_.publish(msg)\n        self.get_logger().info(f\'Publishing: "{msg.data}"\')\n        self.i += 1\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = MinimalPublisher()\n\n    try:\n        rclpy.spin(node)  # Keep node running\n    except KeyboardInterrupt:\n        pass\n    finally:\n        node.destroy_node()\n        rclpy.shutdown()\n\n\nif __name__ == \'__main__\':\n    main()\n'})}),"\n",(0,r.jsx)(n.h2,{id:"exercises",children:"Exercises"}),"\n",(0,r.jsx)(n.h3,{id:"exercise-1-explore-the-ros-2-graph",children:"Exercise 1: Explore the ROS 2 Graph"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Start the demo talker node: ",(0,r.jsx)(n.code,{children:"ros2 run demo_nodes_cpp talker"})]}),"\n",(0,r.jsxs)(n.li,{children:["In another terminal, list active nodes: ",(0,r.jsx)(n.code,{children:"ros2 node list"})]}),"\n",(0,r.jsxs)(n.li,{children:["List active topics: ",(0,r.jsx)(n.code,{children:"ros2 topic list"})]}),"\n",(0,r.jsxs)(n.li,{children:["Echo the topic content: ",(0,r.jsx)(n.code,{children:"ros2 topic echo /chatter"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"exercise-2-create-a-package",children:"Exercise 2: Create a Package"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Create a new Python package named ",(0,r.jsx)(n.code,{children:"my_humanoid"})]}),"\n",(0,r.jsxs)(n.li,{children:["Add ",(0,r.jsx)(n.code,{children:"rclpy"})," and ",(0,r.jsx)(n.code,{children:"geometry_msgs"})," as dependencies"]}),"\n",(0,r.jsxs)(n.li,{children:["Build the workspace with ",(0,r.jsx)(n.code,{children:"colcon build"})]}),"\n",(0,r.jsxs)(n.li,{children:["Source the workspace and verify: ",(0,r.jsx)(n.code,{children:"ros2 pkg list | grep my_humanoid"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"exercise-3-inspect-qos-settings",children:"Exercise 3: Inspect QoS Settings"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Run: ",(0,r.jsx)(n.code,{children:"ros2 topic info /chatter --verbose"})]}),"\n",(0,r.jsx)(n.li,{children:"Note the QoS settings for reliability and durability"}),"\n",(0,r.jsx)(n.li,{children:"Research what each setting means for robot communication"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"assessment-questions",children:"Assessment Questions"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"What is the role of DDS in ROS 2, and how does it differ from ROS 1's communication approach?"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Explain the relationship between nodes, topics, and messages in the ROS 2 computation graph."})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Why is Quality of Service (QoS) important for humanoid robotics applications?"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"What are the advantages of ROS 2's decentralized architecture over ROS 1's master-based approach?"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsx)(n.p,{children:"In this chapter, we explored the fundamental architecture of ROS 2:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ROS 2"})," is a middleware framework providing tools and conventions for robot software development"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"DDS"})," enables distributed, real-time communication without a central master"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Workspaces"})," and ",(0,r.jsx)(n.strong,{children:"packages"})," organize code into modular, reusable components"]}),"\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.strong,{children:"computation graph"})," represents the network of nodes communicating via topics, services, and actions"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This architectural foundation prepares us for the next chapter, where we'll dive deep into nodes, topics, and services\u2014the building blocks of ROS 2 applications."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Next"}),": ",(0,r.jsx)(n.a,{href:"./nodes-topics-services",children:"Nodes, Topics, and Services"})]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>a});var s=i(6540);const r={},t=s.createContext(r);function o(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);